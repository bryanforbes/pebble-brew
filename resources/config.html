<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Configure</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	<input id="text" type="text" value="farts">
	<button id="save">Save</button>
	<button id="cancel">Cancel</button>

	<script src="//ajax.googleapis.com/ajax/libs/dojo/1.9.2/dojo/dojo.js" data-dojo-config="async:true"></script>
	<script>
		require([
			'dojo/on',
			'dojo/dom',
			'dojo/io-query'
		], function (on, dom, ioq) {
			on(dom.byId('save'), 'click', function (event) {
				location.href = 'pebblejs://close#' + encodeURIComponent(JSON.stringify({ text: dom.byId('text').value }));
			});
			on(dom.byId('cancel'), 'click', function(event) {
				location.href = 'pebblejs://close#';
			});

			var query = location.search.slice(1),
				config = {};

			if (query) {
				query = ioq.queryToObject(location.search.slice(1));
				config = JSON.parse(query.config);

				dom.byId('text').value = config.text;
			}
		});
	</script>
</body>
</html>
