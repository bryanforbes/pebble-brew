<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Configure</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<style>
		@import "config.css";
	</style>
</head>
<body>
	<h1>Brew Configuration</h1>
	<form id="form">
		<h2>Colors</h2>
		<div>
			<input id="bgColor" type="checkbox" class="switch" name="backgroundColor">
			<label for="bgColor">Background</label>
		</div>
		<div>
			<input id="handStroke" type="checkbox" class="switch" name="handStrokeColor">
			<label for="handStroke">Hand outline</label>
		</div>
		<div>
			<input id="handFill" type="checkbox" class="switch" name="handFillColor">
			<label for="handFill">Hand fill</label>
		</div>
	</form>

	<div>
		<button id="save">Save</button>
		<button id="cancel">Cancel</button>
	</div>
	<script>
		(function (byId) {
			var config = JSON.parse('__CONFIG__'),
				form = byId('form');
			byId('save').addEventListener('click', function (event) {
				console.log('save here!');
				var saved = {};
				for (var key in config) {
					saved[key] = form.elements[key].checked ? 1 : 0;
				}
				location.href = 'pebblejs://close#' + encodeURIComponent(JSON.stringify(saved));
			});
			byId('cancel').addEventListener('click', function (event) {
				console.log('save here!');
				location.href = 'pebblejs://close#';
			});

			for (var key in config) {
				form.elements[key].checked = !!config[key];
			}
		})(document.getElementById.bind(document));
	</script>
</body>
</html>
